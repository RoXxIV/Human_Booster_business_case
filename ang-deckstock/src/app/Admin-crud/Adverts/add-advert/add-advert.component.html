<app-admin-nav></app-admin-nav>
<section class="row justify-content-center">
  <h1 class="mb-2 text-center">Ajouter une annonces</h1>
  <div class="col-12 col-md-6">
    <form [formGroup]="advertForm" (ngSubmit)="onSubmit()">
      <div class="form-group md-form">
        <label for="formDescription">Description</label>
        <textarea
          class="form-control md-textarea"
          mdbInput
          id="formDescription"
          formControlName="description"
        ></textarea>
      </div>
      <!--width-->
      <div class="form-group">
        <label for="widthId">Largeurs</label>
        <select
          formControlName="width"
          id="widthId"
          class="browser-default custom-select"
        >
          <option [value]="w" *ngFor="let w of widths" class="form-control">
            {{ w }}
          </option>
        </select>
      </div>
      <!--length-->
      <div class="form-group md-form">
        <label for="formLength">Longueur</label>
        <input
          type="text"
          mdbInput
          class="form-control"
          formControlName="length"
          id="formLength"
        />
      </div>
      <!--shape-->
      <div class="form-group">
        <label for="shapeId">Shape</label>
        <select
          formControlName="shape"
          id="shapeId"
          class="browser-default custom-select"
        >
          <option [value]="s" *ngFor="let s of shapes" class="form-control">
            {{ s }}
          </option>
        </select>
      </div>
      <!--concave-->
      <div class="form-group">
        <label for="concaveId">Concave</label>
        <select
          formControlName="concave"
          id="concaveId"
          class="browser-default custom-select"
        >
          <option [value]="c" *ngFor="let c of concaves" class="form-control">
            {{ c }}
          </option>
        </select>
      </div>
      <!--photos-->
      <div class="form-group md-form">
        <label for="formPicture">Photo</label>
        <input
          mdbInput
          type="text"
          class="form-control"
          formControlName="picturePath"
          id="formPicture"
        />
      </div>
      <!--Price-->
      <div class="form-group md-form">
        <label for="formLength">Prix</label>
        <input
          mdbInput
          type="number"
          step=".01"
          class="form-control"
          formControlName="price"
          id="formLength"
        />
      </div>
      <!--modele-->
      <div formGroupName="model" class="form-group">
        <label for="modelId">Modele</label>
        <select
          formControlName="id"
          id="modelId"
          class="browser-default custom-select"
        >
          <option [value]="m.id" *ngFor="let m of models" class="form-control">
            {{ m.name }} ({{ m.brand["name"] }})
          </option>
        </select>
      </div>
      <!--skateshop-->
      <div formGroupName="skateshop" class="form-group">
        <label for="skateshoplId">Skateshop</label>
        <select
          formControlName="id"
          id="skateshoplId"
          class="browser-default custom-select"
        >
          <option
            [value]="s.id"
            *ngFor="let s of skateshops"
            class="form-control"
          >
            {{ s.name }} (Mr.{{ s.professional["lastName"] }})
          </option>
        </select>
      </div>
      <!--Gestion des erreurs-->
      <ul *ngIf="submitted">
        <li *ngIf="advertForm.controls['description']?.errors?.required">
          <div class="alert alert-danger" role="alert">
            Le champs Description est vide ou incorrect
          </div>
        </li>
        <li *ngIf="advertForm.controls['width']?.errors?.required">
          <div class="alert alert-danger" role="alert">
            Le champs Largeur est vide ou incorrect
          </div>
        </li>
        <li *ngIf="advertForm.controls['length']?.errors?.required">
          <div class="alert alert-danger" role="alert">
            Le champs Longueur est vide ou incorrect
          </div>
        </li>
        <li *ngIf="advertForm.controls['shape']?.errors?.required">
          <div class="alert alert-danger" role="alert">
            Le champs Shape est vide ou incorrect
          </div>
        </li>
        <li *ngIf="advertForm.controls['concave']?.errors?.required">
          <div class="alert alert-danger" role="alert">
            Le champs Concave est vide ou incorrect
          </div>
        </li>
        <li *ngIf="advertForm.controls['picturePath']?.errors?.required">
          <div class="alert alert-danger" role="alert">
            Le champs Photo est vide ou incorrect
          </div>
        </li>
      </ul>
      <button type="submit" class="btn btn-success btn-sm my-2">Ajouter</button>
    </form>
    <button routerLink="/adverts" class="btn btn-dark btn-sm">Retour</button>
  </div>
</section>
